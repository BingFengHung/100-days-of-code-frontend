## 12. Arrays
### 12.1. Converting Array-like Objects to Arrays
#### What are Array-like Objects?
JavaScript 有"Array-like Objects (類似陣列的物件)"，將物件表示成有長度屬性的陣列

```javascript
var realArray = ['a', 'b', 'c'];
var arrayLike = {
  0: 'a',
  1: 'b',
  2: 'c',
  length: 3
};
```
Array-like Object 常見範例是函式中的 arguments 物件以及從 document.getElementsByTagName 或是 document.querySelectorAll 之類的方法返回 HTMLCollection 或 NodeList 物件。

- Array-like object
  - function (傳入的參數 -> arguments)
  - document.getElementsByTagName (HTMLCollection)
  - document.querySelectorAll (NodeList)

然而，Array 與 Array-like Object 之間有一個關鍵的差異就是 Array-like 物件是繼承至 Object.prototype 而不是 Array.prototype。這代表 Array-like Object 不能使用一般 Array prototype 的方法像是 forEach(), push(), map(), filter() 以及 slice():

```javascript
var parent = document.getElementById('myDropdown');
var desiredOption = parent.querySelector('option[value='desired']');
var domList = parent.child;

domList.indexOf(desiredOption);  // Error! indexOf is not defined.
domList.forEach(function() {
  arguments.map(/* Stuff here */)  // Error! map is not defined
});  // Error! forEach is not defined

function func() {
  console.log(arguments);
}

func(1, 2, 3) // [1, 2, 3]  Array-like object
```

#### Convert Array-like Objects to Arrays in ES6
1. Array.from:

```javascript
const arrayLike = {
  0: 'Value 0',
  1: 'Value 1',
  length: 2
};

arrayLike.forEach(value => {/* Do something */});  // Error
const realArray = Array.from(arrayLike);
realArray.forEach(value => {/* Do something */});  // Works
```

上面經過測試，如果 Array-like Object 沒有寫 length 屬性的話，使用 Array.from() 會建立出空陣列，而如果 length 寫入比物件屬性還要多的數量時，後面多的會直接寫成 undefined。

2. for...of 
```javascript
var realArray = [];
// arrayLike 是不可迭代的物件
for(const element of arrayLike) {
  realArray.append(element);  // append 應該改為 push
}

// 如果改成 for ... in 就可以運行
for(const element in arrayLike) {
  realArray.push(arrayLike[element]);
}
```
> 補充:  
![](images/12/2019-11-04-21-58-43.png)
![](images/12/2019-11-04-21-59-01.png)
![](images/12/2019-11-04-21-59-16.png)
![](images/12/2019-11-04-21-59-29.png)

3. Spread operator
[...arrayLike]  // 不可迭代的物件也不可以使用 spread operator

4. Object.values:
```javascript
var realArray = Object.values(arrayLike);
```

5. Object.keys
```javascript
var realArray = Object
.keys(arrayLike)
.map((key) => arrayLike[key]);

// 先使用 object.keys 取得物件的屬性名稱
// 再針對返回的 keys 使用 map 最後取得 realArray 的陣列
```

#### Convert Array-like Objects to Arrays in ES5
Use Array.prototype.slice like
```javascript
var arrayLike = {
  0: 'Value 0',
  1: 'Value 1',
  length: 2
};

var realArray = Array.prototype.slice.call(arrayLike);
realArray = [].slice.call(arrayLike);  // Shorter version

realArray.indexOf('Value 1');  // Wow this works!
```

你也可以使用 Function.prototype.call 直接在 Array-like object 呼叫 Array.prototype 方法，而不需要轉換他們：
```javascript
var domList = document.querySelectorAll('#myDropdown option');
domList.forEach(function() {
// Do stuff
}); // Error! forEach is not defined.
Array.prototype.forEach.call(domList, function() {
// Do stuff
}); // Wow! this works
```

你也可以使用 [].method.bind 借用陣列方法並將其綁定到物件上
```javascript
var arrayLike = {
0: 'Value 0',
1: 'Value 1',
length: 2
};
arrayLike.forEach(function() {
// Do stuff
}); // Error! forEach is not defined.
[].forEach.bind(arrayLike)(function(val){
// Do stuff with val
}); // Wow! this works
```

#### Modifying items during conversion
在 ES6 中，當使用 Array.from 時，我們可以指定一個 map 函數，該函數返回要建立新物件的 map 值。

```javascript
Array.from(domList, element => element.tagName); // Creates an array of tagName's
```

### 12.2. Reducing values
reduce() 方法應用